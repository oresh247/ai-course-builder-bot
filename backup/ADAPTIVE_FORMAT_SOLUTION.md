# üéØ –†–ï–®–ï–ù–ò–ï: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ AI

## –ü—Ä–æ–±–ª–µ–º–∞

OpenAI API —É–ø–æ—Ä–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–ª **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É** JSON - —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É—Ä–æ–∫–∞ (Lesson) –≤–º–µ—Å—Ç–æ –ª–µ–∫—Ü–∏–π (Lectures):

**–ü–æ–ª—É—á–∞–ª–∏:**
```json
{
  "lesson_title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python",
  "lesson_goal": "–ò–∑—É—á–∏—Ç—å –æ—Å–Ω–æ–≤—ã",
  "estimated_time_minutes": 60,
  "format": "theory",
  "assessment": "–¢–µ—Å—Ç",
  "content_outline": [
    "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ",
    "–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö",
    "–û–ø–µ—Ä–∞—Ç–æ—Ä—ã"
  ]
}
```

**–û–∂–∏–¥–∞–ª–∏:**
```json
{
  "module_number": 1,
  "module_title": "...",
  "lectures": [
    {
      "lecture_title": "...",
      "slides": [...]
    }
  ]
}
```

## –†–µ—à–µ–Ω–∏–µ: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

–í–º–µ—Å—Ç–æ –±–æ—Ä—å–±—ã —Å OpenAI, **–ø—Ä–∏–Ω–∏–º–∞–µ–º –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç** –∏ **–ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º** –µ–≥–æ –≤ –Ω—É–∂–Ω—ã–π!

### 1. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ Multi-format —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–±—É–µ—Ç **3 –º–µ—Ç–æ–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:

```python
def generate_module_content():
    # –ü–æ–ø—ã—Ç–∫–∞ 1: Function Calling (—Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π)
    result = self._try_function_calling(...)
    if result: return result
    
    # –ü–æ–ø—ã—Ç–∫–∞ 2: JSON mode
    result = self._try_json_mode(...)
    if result: return result
    
    # –ü–æ–ø—ã—Ç–∫–∞ 3: –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
    result = self._try_text_mode(...)
    if result: return result
    
    # Fallback: –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    return self._get_test_module_content(...)
```

### 2. –£–º–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞

–§—É–Ω–∫—Ü–∏—è `_extract_json()` —Ç–µ–ø–µ—Ä—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç** —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞:

```python
def _extract_json(content):
    parsed = json.loads(content)
    
    if 'lectures' in parsed:
        # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
        return parsed
        
    elif 'lesson_title' in parsed:
        # üîÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–∫–∞ - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º!
        return self._convert_lesson_to_lectures(parsed)
        
    else:
        # ‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
        return None
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Lesson ‚Üí Lectures

–ö–æ–≥–¥–∞ OpenAI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É—Ä–æ–∫–∞, —Å–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ª–µ–∫—Ü–∏—é —Å–æ —Å–ª–∞–π–¥–∞–º–∏**:

```python
def _convert_lesson_to_lectures(lesson_data):
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç:
    {
      "lesson_title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python",
      "lesson_goal": "–ò–∑—É—á–∏—Ç—å –æ—Å–Ω–æ–≤—ã",
      "content_outline": ["–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ", "–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö"]
    }
    
    –í:
    {
      "lectures": [{
        "lecture_title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python",
        "slides": [
          {slide_number: 1, title: "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python", ...},
          {slide_number: 2, title: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ", ...},
          {slide_number: 3, title: "–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö", ...},
          {slide_number: 4, title: "–ò—Ç–æ–≥–∏", ...}
        ]
      }]
    }
    """
```

### 4. –£–º–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–∞–π–¥–æ–≤

–°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–∞–π–¥—ã** –∏–∑ –ø–ª–∞–Ω–∞ —É—Ä–æ–∫–∞:

- **–°–ª–∞–π–¥ 1**: –ó–∞–≥–ª–∞–≤–Ω—ã–π (title) - –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ü–µ–ª—å
- **–°–ª–∞–π–¥—ã 2-N**: –ö–æ–Ω—Ç–µ–Ω—Ç –∏–∑ `content_outline`
  - –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞: code, diagram, content
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞ –¥–ª—è code-—Å–ª–∞–π–¥–æ–≤
  - –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–∞–π–¥**: –ò—Ç–æ–≥–∏ (summary)

### 5. Function Calling - —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π –º–µ—Ç–æ–¥

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–∏—á–∞ OpenAI –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤:

```python
tools = [{
    "type": "function",
    "function": {
        "name": "create_module_lectures",
        "description": "–°–æ–∑–¥–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–µ–∫—Ü–∏–∏ —Å–æ —Å–ª–∞–π–¥–∞–º–∏",
        "parameters": {
            "type": "object",
            "properties": {
                "lectures": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "lecture_title": {"type": "string"},
                            "slides": {...}
                        }
                    }
                }
            }
        }
    }
}]

response = openai_client.create(
    model="gpt-4-turbo-preview",
    tools=tools,
    tool_choice={"type": "function", "function": {"name": "create_module_lectures"}}
)
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç OpenAI
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
‚úÖ **–£–º–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Å–ª–∞–π–¥—ã –∏–∑ –ø–ª–∞–Ω–∞
‚úÖ **Multi-tier fallback** - –µ—Å–ª–∏ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –ø—Ä–æ–±—É–µ—Ç –¥—Ä—É–≥–æ–π
‚úÖ **Graceful degradation** - –≤ —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

## –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### –£—Å–ø–µ—à–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:

```
INFO:content_generator:–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –º–æ–¥—É–ª—è: –û—Å–Ω–æ–≤—ã Python
INFO:content_generator:üîß –ü—Ä–æ–±—É–µ–º Function Calling...
WARNING:content_generator:‚ùå Function Calling –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª: ...
INFO:content_generator:üîß –ü—Ä–æ–±—É–µ–º JSON mode...
WARNING:content_generator:‚ö†Ô∏è OpenAI –≤–µ—Ä–Ω—É–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É—Ä–æ–∫–∞ –≤–º–µ—Å—Ç–æ –ª–µ–∫—Ü–∏–π. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º...
INFO:content_generator:üîÑ –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —É—Ä–æ–∫ –≤ –ª–µ–∫—Ü–∏—é —Å–æ —Å–ª–∞–π–¥–∞–º–∏...
INFO:content_generator:‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ª–µ–∫—Ü–∏—è —Å 8 —Å–ª–∞–π–¥–∞–º–∏
INFO:content_generator:‚úÖ JSON mode —É—Å–ø–µ—à–Ω–æ: 1 –ª–µ–∫—Ü–∏–π, 8 —Å–ª–∞–π–¥–æ–≤
```

### Function Calling —É—Å–ø–µ—à–Ω–æ:

```
INFO:content_generator:üîß –ü—Ä–æ–±—É–µ–º Function Calling...
INFO:content_generator:‚úÖ Function Calling —É—Å–ø–µ—à–Ω–æ: 3 –ª–µ–∫—Ü–∏–π, 24 —Å–ª–∞–π–¥–æ–≤
```

### Fallback –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç:

```
INFO:content_generator:üîß –ü—Ä–æ–±—É–µ–º Function Calling...
WARNING:content_generator:‚ùå Function Calling –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª: ...
INFO:content_generator:üîß –ü—Ä–æ–±—É–µ–º JSON mode...
WARNING:content_generator:‚ùå JSON mode –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª: ...
INFO:content_generator:üîß –ü—Ä–æ–±—É–µ–º –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º...
WARNING:content_generator:‚ùå –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª: ...
WARNING:content_generator:üìå –í—Å–µ –º–µ—Ç–æ–¥—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–µ—Ç–æ–¥–æ–≤:

1. **Function Calling** (—Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π)
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏
   - OpenAI –Ω–µ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
   
2. **JSON mode** (`response_format: {"type": "json_object"}`)
   - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π JSON
   - –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º)
   
3. **–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º** (–æ–±—ã—á–Ω—ã–π GPT-4)
   - –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ç–µ–∫—Å—Ç, markdown, JSON
   - –ò–∑–≤–ª–µ–∫–∞–µ–º –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º

4. **–¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç** (fallback)
   - –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

### –õ–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:

```
OpenAI –æ—Ç–≤–µ—Ç ‚Üí _extract_json() ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞
                                    ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚Üì                               ‚Üì
              'lectures' –Ω–∞–π–¥–µ–Ω–æ              'lesson_title' –Ω–∞–π–¥–µ–Ω–æ
                    ‚Üì                               ‚Üì
            –í–µ—Ä–Ω—É—Ç—å –∫–∞–∫ –µ—Å—Ç—å          _convert_lesson_to_lectures()
                                              ‚Üì
                                    –°–æ–∑–¥–∞—Ç—å –ª–µ–∫—Ü–∏—é —Å–æ —Å–ª–∞–π–¥–∞–º–∏
                                              ‚Üì
                                      –í–µ—Ä–Ω—É—Ç—å lectures
```

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `content_generator.py`:
  - `generate_module_content()` - multi-tier strategy
  - `_try_function_calling()` - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥
  - `_try_json_mode()` - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥
  - `_try_text_mode()` - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥
  - `_extract_json()` - —É–º–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞
  - `_convert_lesson_to_lectures()` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç

üéâ **–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –õ–Æ–ë–´–ú —Ñ–æ—Ä–º–∞—Ç–æ–º –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI!**

–ù–µ –≤–∞–∂–Ω–æ, —á—Ç–æ –≤–µ—Ä–Ω–µ—Ç –º–æ–¥–µ–ª—å - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —ç—Ç–æ –≤ –Ω—É–∂–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–ª–∏ —Å–æ–∑–¥–∞—Å—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.

---

**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2025

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢!** –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å —É–º–Ω—ã–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–æ–≤.




