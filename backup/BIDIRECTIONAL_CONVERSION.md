# üîÑ –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ Lesson ‚Üî Lectures

## –ü—Ä–æ–±–ª–µ–º–∞

OpenAI –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å **—Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ **–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–æ–¥—É–ª—è** ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É **—É—Ä–æ–∫–∞ (Lesson)**
- –ü—Ä–∏ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ **—É—Ä–æ–∫–∞** ‚Üí —Ç–æ–∂–µ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É **–ª–µ–∫—Ü–∏–∏ (Lecture)**

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–∞–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Pydantic.

## –†–µ—à–µ–Ω–∏–µ: –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã **–¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏** –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã:

### 1. Lesson ‚Üí Lectures (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)

```python
def _convert_lesson_to_lectures(lesson_data):
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç:
    {
      "lesson_title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python",
      "lesson_goal": "–ò–∑—É—á–∏—Ç—å –æ—Å–Ω–æ–≤—ã",
      "content_outline": ["–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ", "–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö"]
    }
    
    –í:
    {
      "lectures": [{
        "lecture_title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python",
        "slides": [
          {slide_number: 1, title: "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python", ...},
          {slide_number: 2, title: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ", ...},
          ...
        ]
      }]
    }
    """
```

### 2. Lecture ‚Üí Lesson (–¥–ª—è –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Ä–æ–∫–∞)

```python
def _convert_lecture_to_lesson(lecture_data):
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç:
    {
      "lecture_title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python",
      "learning_objectives": ["–ò–∑—É—á–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ", ...],
      "slides": [
        {title: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ", slide_type: "content"},
        {title: "–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö", slide_type: "code"},
        ...
      ]
    }
    
    –í:
    {
      "lesson_title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python",
      "lesson_goal": "–ò–∑—É—á–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ...",
      "content_outline": ["–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ", "–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö"],
      "format": "practice",  // –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–∏–ø–∞–º —Å–ª–∞–π–¥–æ–≤
      "assessment": "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ",
      "estimated_time_minutes": 45
    }
    """
```

## –£–º–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ JSON

### –î–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–æ–¥—É–ª–µ–π (`_extract_json`)

```python
def _extract_json(content):
    parsed = json.loads(content)
    
    if 'lectures' in parsed:
        # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
        return parsed
        
    elif 'lesson_title' in parsed:
        # üîÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–∫–∞ ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –ª–µ–∫—Ü–∏–∏
        return self._convert_lesson_to_lectures(parsed)
```

### –î–ª—è –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Ä–æ–∫–æ–≤ (`_extract_lesson_json`)

```python
def _extract_lesson_json(content):
    parsed = json.loads(content)
    
    if 'lesson_title' in parsed and 'lesson_goal' in parsed:
        # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–∫–∞
        return parsed
        
    elif 'lectures' in parsed:
        # üîÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–µ–∫—Ü–∏–∏ ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ —É—Ä–æ–∫
        return self._convert_lecture_to_lesson(parsed['lectures'][0])
```

## –õ–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è Lecture ‚Üí Lesson

### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```python
lesson_title = lecture_data.get("lecture_title")
duration = lecture_data.get("duration_minutes", 45)
learning_objectives = lecture_data.get("learning_objectives", [])
slides = lecture_data.get("slides", [])
```

### 2. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–∏ —É—Ä–æ–∫–∞

```python
if learning_objectives:
    lesson_goal = " ".join(learning_objectives)
else:
    lesson_goal = f"–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –ø–æ —Ç–µ–º–µ: {lesson_title}"
```

### 3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –∏–∑ —Å–ª–∞–π–¥–æ–≤

```python
content_outline = []
for slide in slides:
    slide_type = slide.get("slide_type")
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º title –∏ summary —Å–ª–∞–π–¥—ã
    if slide_type not in ["title", "summary"]:
        content_outline.append(slide.get("title"))
```

### 4. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —É—Ä–æ–∫–∞

```python
has_code = any(s.get("slide_type") == "code" for s in slides)
has_quiz = any(s.get("slide_type") == "quiz" for s in slides)

if has_code:
    format_type = "practice"
elif has_quiz:
    format_type = "quiz"
else:
    format_type = "theory"
```

### 5. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ü–µ–Ω–∫–∏

```python
assessment = (
    "–¢–µ—Å—Ç" if has_quiz else
    "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ" if has_code else
    "–û–ø—Ä–æ—Å"
)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –í course_bot.py (–ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ä–æ–∫–∞)

**–ë—ã–ª–æ:**
```python
content = response.choices[0].message.content.strip()
json_content = content_generator._extract_json(content)  # ‚ùå –û—à–∏–±–∫–∞!
module.lessons[lesson_index] = Lesson(**json_content)
```

**–°—Ç–∞–ª–æ:**
```python
content = response.choices[0].message.content.strip()
json_content = content_generator._extract_lesson_json(content)  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!
module.lessons[lesson_index] = Lesson(**json_content)
```

## –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Lesson ‚Üí Lectures:

```
WARNING:content_generator:‚ö†Ô∏è OpenAI –≤–µ—Ä–Ω—É–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É—Ä–æ–∫–∞ –≤–º–µ—Å—Ç–æ –ª–µ–∫—Ü–∏–π. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º...
INFO:content_generator:üîÑ –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —É—Ä–æ–∫ –≤ –ª–µ–∫—Ü–∏—é —Å–æ —Å–ª–∞–π–¥–∞–º–∏...
INFO:content_generator:‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ª–µ–∫—Ü–∏—è —Å 9 —Å–ª–∞–π–¥–∞–º–∏
```

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Lecture ‚Üí Lesson:

```
WARNING:content_generator:‚ö†Ô∏è OpenAI –≤–µ—Ä–Ω—É–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É lectures –≤–º–µ—Å—Ç–æ lesson. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ...
INFO:content_generator:üîÑ –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –ª–µ–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ –≤ —É—Ä–æ–∫...
INFO:content_generator:‚úÖ –°–æ–∑–¥–∞–Ω —É—Ä–æ–∫ —Å 7 –ø—É–Ω–∫—Ç–∞–º–∏ –ø–ª–∞–Ω–∞
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```
INFO:content_generator:‚úÖ –ü–æ–ª—É—á–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–∫–∞ (lesson)
```

–∏–ª–∏

```
INFO:content_generator:‚úÖ –ü–æ–ª—É—á–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å 'lectures'
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –æ—Ç–≤–µ—Ç–∞ OpenAI
‚úÖ **–î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å** - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã
‚úÖ **–£–º–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö edge cases
‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å—é –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `content_generator.py`:
  - `_extract_json()` - –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–æ–¥—É–ª–µ–π (Lesson ‚Üí Lectures)
  - `_extract_lesson_json()` - –¥–ª—è –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Ä–æ–∫–æ–≤ (Lecture ‚Üí Lesson)
  - `_convert_lesson_to_lectures()` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Lesson ‚Üí Lectures
  - `_convert_lecture_to_lesson()` - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Lecture ‚Üí Lesson
  
- `course_bot.py`:
  - `_regenerate_lesson_item()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_extract_lesson_json()`

## –†–µ–∑—É–ª—å—Ç–∞—Ç

üéâ **–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –æ—Ç–≤–µ—Ç–∞ OpenAI –≤ –ª—é–±–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ!**

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–æ–¥—É–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ä–æ–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–µ–∫—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–∞–π–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ù–µ—Ç –±–æ–ª—å—à–µ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Pydantic! üöÄ

---

**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2025

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–û! –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ.




